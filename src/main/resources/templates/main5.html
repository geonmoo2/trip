<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/css/main/main.css">
    <link rel="stylesheet" type="text/css" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        .main1{

           width: 100%;
           height: 480px;
           border: 0px solid black;
           background-image: url("https://png.pngtree.com/thumb_back/fw800/background/20230817/pngtree-lighthouse-in-kerala-by-amit-thomas-image_13036267.jpg");
           background-size: 100% 128%;
           margin-top: 100px;
        }
    </style>
</head>
<body>

    <th:block th:replace="~{fragments/nav :: navFragment}"></th:block>
    <main>
        <div class="main1"></div>
            <div class="main2">

                <div class="main-content">
                    <div class="main-content-text">
                        <h1>전라도 인기 관광명소</h1>


                        <div>
                            <span>기개 높은 대나무숲을 가진 담양, 보푸른 녹차밭의 보성, 이름만으로도 좋은 여수 밤바다까지 각 지역의 전통과 고유색이 잘 살아있는 전라남도. 순천만의 지평선 끝까지 황금빛으로 물든 갈대밭을 구경하고 싶다면 11월 초에 열리는 순천만갈대축제를 방문해보는 것을 추천한다. 해상관광부터 산악관광까지 두루 갖춘 전라남도에서 색다른 자연의 매력에 흠뻑 빠져보길 바란다.</span>
                        </div>



                    </div>
                    <div class="content1">

                        <div class="s1">
                            <span class="material-symbols-outlined" id="btn1">keyboard_double_arrow_left</span>
                            <div class="slides">

                                <a href="/content/content21">
                                    <img src="https://ldb-phinf.pstatic.net/20240717_104/1721178473012Hs7IA_PNG/KakaoTalk_20240717_100710182.png?type=f750_420_60_sharpen" alt="">
                                </a>
                                <a href="/content/content21">
                                    <img src="https://cdn.newsfreezone.co.kr/news/photo/202004/230343_231545_5733.jpg" alt="">
                                </a>
                                <a href="/content/content21">
                                    <img src="https://img.einet.kr/P202104014/travel/4568916/01.jpg?v=1623289182" alt="">
                                </a>

                                <a href="/content/content21">
                                    <img src="https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20240717_253%2F1721179110857H5RYH_PNG%2F20220520-%25BF%25A9%25BC%25F6%25C0%25AF%25BF%25F9%25B5%25E5-00%25C0%25FC%25B0%25E6-0023.png" alt="">
                                </a>
                            </div>
                            <span class="material-symbols-outlined" id="btn2">keyboard_double_arrow_right</span>
                            <div class="paginate">
                                <div class="circle"></div>
                                <div class="circle"></div>
                                <div class="circle"></div>
                                <div class="circle"></div>
                            </div>
                        </div>
                        <div class="s1-text">
                            <h2>01.</h2>
                            <div class="s1-text1">
                                <h1>여수 유월드 루지 테마파크</h1>
                            </div>
                            <div class="s1-text2">
                                <span>친구, 연인, 가족 모두가 가슴이 뻥 뚫리는 스릴을 경험할 수 있는 레이싱의 장, 여수 유월드 테마파크는 루지, 놀이공원, 실내 키즈파크, 테디베어 뮤지엄, 비비탄 사격장, 레이저 아레나를 모두 한 곳에서 즐길 수 있는 멀티플렉스 테마파크이다. 이곳에 위치한 루지 테마파크는 국내 최초로 지상 7m 높이에서 길이 1.3km에 달하는 하늘을 달리는 스릴을 만끽할 수 있다.</span>
                                <div><h5>별점 평균</h5>
                                    <div class="average-stars-2" id="rating-1">
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                    </div>
                                    <span id="average-rating" th:text="${#numbers.formatDecimal(averageRatings[21L] != null ? averageRatings[21L] : 0.0, 1, 1)}">데이터 없음</span>

                                </div>
                            </div>
                        </div>
                        <span class="material-symbols-outlined" id="btn3">arrow_circle_left</span>
                        <div class="content1-text">
                            <!-- 첫 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 0}">

                                <p class="review-user"> <span th:text="${contentReviews[0].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[0].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span th:text="${contentReviews[0].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 두 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 1}">

                                <p class="review-user"> <span th:text="${contentReviews[1].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[1].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span   th:text="${contentReviews[1].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 세 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 2}">

                                <p class="review-user"><span th:text="${contentReviews[2].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[2].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span th:text="${contentReviews[2].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 네 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 3}">

                                <p class="review-user"><span th:text="${contentReviews[3].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[3].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span  th:text="${contentReviews[3].comment}">리뷰 없음</span></p>
                            </div>
                        </div>
                        <span class="material-symbols-outlined" id="btn4">arrow_circle_right</span>
                    </div>
                    <div class="content2">
                        <a href="/content/content22">
                            <img src="https://home-ticket.co.kr/yscable/assets/image/main-slider-image-3.JPG" alt="">
                        </a>
                        <div>
                            <h3>02.</h3>
                            <h2>여수해상케이블카</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating2" th:text="${#numbers.formatDecimal(averageRatings[22L] != null ? averageRatings[22L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-2">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>아시아에서는 홍콩, 싱가폴, 베트남에 이어 네번째로 바다위를 통과하는 해상케이블카로써, 이제 국내에서도 바다위를 통과하는 해상케이블카에서 바람을 가르는 짜릿한 스릴감과 함께 아름다운 바다와 하늘을 온 몸으로 느낄 수 있다.</span>
                        </div>
                    </div>
                    <div class="content2">
                        <a href="/content/content23">
                            <img src="https://www.todaygwangju.com/news/photo/202211/146488_133227_550.jpg" alt="">
                        </a>
                        <div>
                            <h3>03.</h3>
                            <h2>백양사</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating3" th:text="${#numbers.formatDecimal(averageRatings[23L] != null ? averageRatings[23L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-3">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>내장산 국립공원 안에 있는 절로, 백제 무왕(632년) 때 창건했다고 전한다. 거대한 바위를 배경으로 좌우에 맑고 찬 계곡물이 흘러내려 경치가 매우 수려하다. 가을단풍을 비롯하여 일 년 내내 변화 있는 아름다운 경치를 보여준다. 대웅전, 극락보전, 사천왕문은 지방문화재로 소요대사부도는 보물로 지정되어 있다.</span>
                        </div>
                    </div>
                    <div class="content2">
                        <a href="/content/content24">
                            <img src="https://search.pstatic.net/common/?src=https%3A%2F%2Fpup-review-phinf.pstatic.net%2FMjAyNDExMjFfMjY3%2FMDAxNzMyMTg1MTYxOTQy.0uWixkHyYmIpzzfxixXds6ZL6M07n14StaErBiwNgP8g.yk9TVO7q9zk-X-EesUzps54LxCMMm1nydEZkaPgYncIg.JPEG%2F1000042165.jpg.jpg%3Ftype%3Dw1500_60_sharpen" alt="">
                        </a>
                        <div>
                            <h3>04.</h3>
                            <h2>순천만습지</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating4" th:text="${#numbers.formatDecimal(averageRatings[24L] != null ? averageRatings[24L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-4">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>순천만은 우리나라 남해안 중서부에 위치한 만으로서, 전라남도 순천시와 고흥군, 여수시로 둘러싸여 있다. 길게 뻗은 고흥반도와 여수반도로 에워싸인 큰 만을 순천만이라 하기도 하며, 순천시 인안동, 대대동, 해룡면 선학리와 상내리 등으로 둘러싸인 북쪽 해수면만을 순천만이라 일컫기도 한다.</span>
                        </div>
                    </div>
                    <div class="content3">
                        <a href="/content/content25">
                            <img src="https://www.geconomy.co.kr/data/photos/20211251/art_16401456998413_a2b627.jpg" alt="">
                        </a>
                        <div>
                            <h3>05.</h3>
                            <h2>녹테마레 미디어아트</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating5" th:text="${#numbers.formatDecimal(averageRatings[25L] != null ? averageRatings[25L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-5">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>녹테마레는 밤과 바다의 합성어로 ‘여기 당신과 내가 빛나는 밤바다 위로 아무도 몰랐던 환상의 바다, 마레가 열린다’ 라는 의미를 가지고 있는 국내최초의 미디어아트 파빌리온 전시관이다. 해양도시 여수를 상징하는 대표적 자연경관인 여수 밤바다를 주제로 하고 있다.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const slides = document.querySelectorAll('.slides img');
            const buttons = document.querySelectorAll('.paginate .circle');
            const btnPrev = document.getElementById('btn1');
            const btnNext = document.getElementById('btn2');

            let currentIndex = 0;
            function updateSlide(index) {
                slides.forEach((slide, i) => slide.style.display = i == index ? 'block' : 'none');
                buttons.forEach((button, i) => button.classList.toggle('selected' , i ===index));

            }
            function showNextSlide() {

                currentIndex = (currentIndex + 1) % slides.length;
                updateSlide(currentIndex);

            }
            function showPrevSlide() {

                currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                updateSlide(currentIndex);
            }
            btnNext.addEventListener('click', showNextSlide);
            btnPrev.addEventListener('click', showPrevSlide);

            buttons.forEach((button, i)=>{
                button.addEventListener('click', () => {
                    currentIndex = i;
                    updateSlide(currentIndex);

                });
            });

            //Initialize the first slide
            updateSlide(currentIndex);

            const contentText = document.querySelector('.content1-text');
            const contentDivs = contentText.querySelectorAll('div');
            const btnLeft = document.getElementById('btn3');
            const btnRight = document.getElementById('btn4');

            let currentContentIndex = 0;

            btnLeft.addEventListener('click' , function () {
                if(currentContentIndex > 0) {

                    currentContentIndex--;

                }
                updateContentSlide();
            });

            btnRight.addEventListener('click',function(){
                if(currentContentIndex <contentDivs.length - 2) {
                    currentContentIndex++;

                }
                updateContentSlide();
            });
            function updateContentSlide() {
                const slideWidth = contentDivs[0].offsetWidth;
                contentText.style.transform = `translateX(${-currentContentIndex * slideWidth+60}px)`;

            }
            updateContentSlide();


        });

            <!-- 동적으로 만든 별점-->
                document.addEventListener('DOMContentLoaded', function () {
                    // 별점 컨테이너와 별점 값 매핑
                    const ratings = [
                        { id: 'rating-1', value: parseFloat(document.querySelector('#average-rating')?.textContent.trim()) || 0 },
                        { id: 'rating-2', value: parseFloat(document.querySelector('#average-rating2')?.textContent.trim()) || 0 },
                        { id: 'rating-3', value: parseFloat(document.querySelector('#average-rating3')?.textContent.trim()) || 0 },
                        { id: 'rating-4', value: parseFloat(document.querySelector('#average-rating4')?.textContent.trim()) || 0 },
                        { id: 'rating-5', value: parseFloat(document.querySelector('#average-rating5')?.textContent.trim()) || 0 }
                    ];

                    // 각 컨테이너의 별점 색칠
                    ratings.forEach(({ id, value }) => {

                        console.log(`ID: ${id}, Value: ${value}`);

                        const container = document.getElementById(id);
                        if (!container) {
                            console.error(`Container with ID "${id}" not found.`);
                            return;
                        }

                        const stars = container.querySelectorAll('.red-star');
                        stars.forEach((star, index) => {
                            const starValue = index + 1;
                            if (value >= starValue) {
                                star.style.color = 'gold'; // 빨간 별
                            } else if (value > starValue - 1) {
                                // 반쪽 별
                                star.style.color = 'gold';
                                star.style.background = 'linear-gradient(to right, gold 50%, lightgray 50%)';
                                star.style.webkitBackgroundClip = 'text';
                                star.style.webkitTextFillColor = 'transparent';
                            } else {
                                star.style.color = 'lightgray'; // 회색 별
                            }
                        });
                    });
                });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 별점 생성 및 적용 함수
            function createAndApplyStars(containerSelector, averageRating) {
                const container = document.querySelector(containerSelector);
                if (!container) {
                    console.error(`Container ${containerSelector} not found`);
                    return;
                }

                // 별점 초기화 및 생성
                container.innerHTML = '';
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.classList.add('red-star');
                    star.textContent = '★';

                    // 별 색상 설정
                    if (averageRating >= i) {
                        star.style.color = 'gold'; // 빨간 별
                    } else if (averageRating > i - 1) {
                        // 반쪽 별 처리
                        star.style.color = 'gold';
                        star.style.background = 'linear-gradient(to right, gold 50%, lightgray 50%)';
                        star.style.webkitBackgroundClip = 'text';
                        star.style.webkitTextFillColor = 'transparent';
                    } else {
                        star.style.color = 'lightgray'; // 기본 별
                    }

                    container.appendChild(star);
                }
            }

            // 평균 별점 가져오기 및 적용
            const averageRatingElement = document.getElementById('average-rating'); // ID 선택
            if (averageRatingElement) {
                const averageRating = parseFloat(averageRatingElement.textContent.trim()) || 0;
                console.log("평균 별점:", averageRating); // 디버깅용 로그
                createAndApplyStars('.average-stars-2', averageRating);
            } else {
                console.error("평균 별점을 가져올 수 없습니다.");
            }
        });
    </script>

</body>
</html>