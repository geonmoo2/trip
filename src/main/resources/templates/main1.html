<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/css/main/main.css">
    <link rel="stylesheet" type="text/css" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        .main1{

           width: 100%;
           height: 480px;
           border: 0px solid black;
           background-image: url("https://static.tacdn.com/img2/tc/hero/redesign/TC2024_TopAttractions_desktop-c2.jpg");
           background-size: 100% 128%;
           margin-top: 100px;
        }

    </style>


</head>
<body>

    <th:block th:replace="~{fragments/nav :: navFragment}"></th:block>
    <main>
        <div class="main1"></div>
            <div class="main2">

                <div class="main-content">
                    <div class="main-content-text">
                        <h1>경기도 인기 관광명소</h1>


                        <div>
                            <span>문화· 예술· 레저 등 모든 걸 아우르는 경기도. 서울 근교에 위치해 접근성이 좋고 다양한 문화생활을 즐길 수 있어서 주말을 이용한 나들이가 가능하다. 아울렛이 위치한 파주와 여주는 문화 복합 도시로 풍부한 볼거리를 제공하고 있다. 양평이나 가평은 자연과 함께 여유로운 하루를 만끽하고 싶은 이들에게 제격이다.</span>
                        </div>



                    </div>
                    <div class="content1">

                        <div class="s1">
                            <span class="material-symbols-outlined" id="btn1">keyboard_double_arrow_left</span>
                            <div class="slides">

                                <a href="/content/content1">
                                    <img src="https://blog.kakaocdn.net/dn/HmOL0/btq7QPKJucK/mboaKnLFHYr87Kunci1TVK/img.jpg" alt="">
                                </a>
                                <a href="/content/content1">
                                    <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyNDA2MTNfMjc4%2FMDAxNzE4MjA2NjY4MjEz.mZPGfwdzG19-2Yr1hkbET_H9ZpHJq895jQkdUG_Yf4Ig.dmzz9RRZmnOO2lX96UsNcD6RI62OKf2FdcjaFvOyMSAg.JPEG%2FDSC03174.jpg" alt="">
                                </a>
                                <a href="/content/content1">
                                    <img src="https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20200624_26%2F1592958225267pFft8_JPEG%2FOkEJkuZmD7ZrAzcU_-u5BZh5.jpeg.jpg" alt="">
                                </a>

                                <a href="/content/content1">
                                    <img src="https://kfescdn.visitkorea.or.kr/kfes/upload/contents/db/8bceec16-bbe3-4d67-93cd-919058e6d7f4_3.PNG" alt="">
                                </a>
                            </div>
                            <span class="material-symbols-outlined" id="btn2">keyboard_double_arrow_right</span>
                            <div class="paginate">
                                <div class="circle"></div>
                                <div class="circle"></div>
                                <div class="circle"></div>
                                <div class="circle"></div>
                            </div>
                        </div>
                        <div class="s1-text">
                            <h2>01.</h2>
                            <div class="s1-text1">
                                <h1>화담숲</h1>
                            </div>
                            <div class="s1-text2">
                                <span>화담숲은 서울에서 40분 거리, 경기도 광주에 위치한 생태수목원이다. LG 상록재단이 우리 숲의 생태계를 복원하는 데 중점을 두고 165,265㎡ (약 5만 평) 대지에 4천3백여 종의 국내외 자생 및 도입식물을 16개의 테마원으로 조성했다. 화담숲의 화담(和談)은 ‘정답게 이야기를 나누다’는 의미로, 화담숲은 인간과 자연이 교감할 수 있는 생태 공간을 지향한다. 우리 숲의 식생을 최대한 보존하였다.
                                    </span>
                                <div><h5>별점 평균</h5>
                                    <div class="average-stars-2" id="rating-1">
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                        <span class="red-star">★</span>
                                    </div>
                                    <span id="average-rating" th:text="${#numbers.formatDecimal(averageRatings[1L] != null ? averageRatings[1L] : 0.0, 1, 1)}">데이터 없음</span>

                                </div>
                            </div>
                        </div>
                        <span class="material-symbols-outlined" id="btn3">arrow_circle_left</span>
                        <div class="content1-text">
                            <!-- 첫 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 0}">

                                <p class="review-user"> <span th:text="${contentReviews[0].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[0].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span th:text="${contentReviews[0].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 두 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 1}">

                                <p class="review-user"> <span th:text="${contentReviews[1].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[1].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span   th:text="${contentReviews[1].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 세 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 2}">

                                <p class="review-user"><span th:text="${contentReviews[2].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[2].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span th:text="${contentReviews[2].comment}">리뷰 없음</span></p>
                            </div>

                            <!-- 네 번째 리뷰 -->
                            <div th:if="${contentReviews.size() > 3}">

                                <p class="review-user"><span th:text="${contentReviews[3].username}">익명</span></p>
                                <p class="review-star">
                                    <span class="review-star-text" th:each="i : ${#numbers.sequence(1, 5)}"
                                          th:classappend="${i <= contentReviews[3].rating} ? 'filled-star' : 'empty-star'">★</span>
                                </p>
                                <p class="review-content"><span  th:text="${contentReviews[3].comment}">리뷰 없음</span></p>
                            </div>
                        </div>
                        <span class="material-symbols-outlined" id="btn4">arrow_circle_right</span>


                    </div>
                    <div class="content2">
                        <a href="/content/content2">
                            <img src="https://t1.daumcdn.net/cfile/tistory/99CE673359DF43161F" alt="">
                        </a>
                        <div>
                            <h3>02.</h3>
                            <h2>에버랜드</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating2" th:text="${#numbers.formatDecimal(averageRatings[2L] != null ? averageRatings[2L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-2">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>5개 테마존의 40여 종의 최신 어트랙션은 짜릿한 스릴을 선사하며 특히 우든코스터 T Express는 롤러코스터 마니아들에게 사랑받고 있다. 파크 곳곳에서 펼쳐지는 다양한 무대공연, 멀티미디어 불꽃쇼 등 초대형 엔터테인먼트가 날마다 새로운 즐거움을 더 할 수 있다.</span>
                        </div>
                    </div>
                    <div class="content2">
                        <a href="/content/content3">
                            <img src="https://www.koreanfolk.co.kr/images/event/display/choga_img08.jpg" alt="">
                        </a>
                        <div>
                            <h3>03.</h3>
                            <h2>한국민속촌</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating3" th:text="${#numbers.formatDecimal(averageRatings[3L] != null ? averageRatings[3L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-3">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>1974년 개장하였다. 옛날 관가(官家)·민가(民家)·반가(班家) 등 지방별로 구조를 달리하는 건축물이 산재하며, 그 속에는 우리 조상들의 생활 모습을 재현하고 각종 생활기구·농경기구·각종 공예품 등을 전시하고 있다. 또 각종 민속놀이·민속공예를 실연(實演)한다. 경기도 용인시 기흥구 민속촌로 90(보라동 35)에 있다.</span>
                        </div>
                    </div>
                    <div class="content2">
                        <a href="/content/content4">
                            <img src="https://i.namu.wiki/i/OuuqnMsOnd4BurTDZ4ycw2I3PApS624n7ZnhX9Jq02L-ajLpFbwYqhKsn8lGKQF5ehyjnAqWake4fAGkrQd0Xg.webp" alt="">
                        </a>
                        <div>
                            <h3>04.</h3>
                            <h2>아쿠아 플라넷</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating4" th:text="${#numbers.formatDecimal(averageRatings[4L] != null ? averageRatings[4L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-4">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>수원컨벤션 인근에 자리한 아쿠아플라넷 광교는 연면적 6,500㎡(약 1,970평), 수조 규모 2,000t으로 샌드타이거샤크, 작은 발톱수달, 펭귄 등 210여 종 30,000마리의 해양 생물을 만날 수 있는 곳이다. 아쿠아플라넷 광교는 총 9개의 존으로 이루어졌다.</span>
                        </div>
                    </div>
                    <div class="content3">
                        <a href="/content/content5">
                            <img src="https://leisure-web.yanolja.com/_next/image?url=https%3A%2F%2Fimage6.yanolja.com%2Fleisure%2Fwmwp7gGoXGZ5lhnj&w=3840&q=90" alt="">
                        </a>
                        <div>
                            <h3>05.</h3>
                            <h2>허브아일랜드</h2>
                            <h3  style="margin-left: 50px; margin-top: 20px;"><span id="average-rating5" th:text="${#numbers.formatDecimal(averageRatings[5L] != null ? averageRatings[5L] : 0.0, 1, 1)}">데이터 없음</span></h3>
                            <div class="average-stars-2" id="rating-5">
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                                <span class="red-star">★</span>
                            </div>
                            <span>허브아일랜드는 허브로 행복한 세상을 만들고자 합니다. 허브의 원산지인 지중해의 생활을 테마로 이색적이며 다양한 볼거리와 즐길거리가 있으며 세계최초의 허브식물박물관이 운영되고 있습니다.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const slides = document.querySelectorAll('.slides img');
            const buttons = document.querySelectorAll('.paginate .circle');
            const btnPrev = document.getElementById('btn1');
            const btnNext = document.getElementById('btn2');

            let currentIndex = 0;
            function updateSlide(index) {
                slides.forEach((slide, i) => slide.style.display = i == index ? 'block' : 'none');
                buttons.forEach((button, i) => button.classList.toggle('selected' , i ===index));

            }
            function showNextSlide() {

                currentIndex = (currentIndex + 1) % slides.length;
                updateSlide(currentIndex);

            }
            function showPrevSlide() {

                currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                updateSlide(currentIndex);
            }
            btnNext.addEventListener('click', showNextSlide);
            btnPrev.addEventListener('click', showPrevSlide);

            buttons.forEach((button, i)=>{
                button.addEventListener('click', () => {
                    currentIndex = i;
                    updateSlide(currentIndex);

                });
            });

            //Initialize the first slide
            updateSlide(currentIndex);

            const contentText = document.querySelector('.content1-text');
            const contentDivs = contentText.querySelectorAll('div');
            const btnLeft = document.getElementById('btn3');
            const btnRight = document.getElementById('btn4');

            let currentContentIndex = 0;

            btnLeft.addEventListener('click' , function () {
                if(currentContentIndex > 0) {

                    currentContentIndex--;

                }
                updateContentSlide();
            });

            btnRight.addEventListener('click',function(){
                if(currentContentIndex <contentDivs.length - 2) {
                    currentContentIndex++;

                }
                updateContentSlide();
            });
            function updateContentSlide() {
                const slideWidth = contentDivs[0].offsetWidth;
                contentText.style.transform = `translateX(${-currentContentIndex * slideWidth+60}px)`;

            }
            updateContentSlide();


        });

    <!-- 동적으로 만든 별점-->
        document.addEventListener('DOMContentLoaded', function () {
            // 별점 컨테이너와 별점 값 매핑
            const ratings = [
                { id: 'rating-1', value: parseFloat(document.querySelector('#average-rating')?.textContent.trim()) || 0 },
                { id: 'rating-2', value: parseFloat(document.querySelector('#average-rating2')?.textContent.trim()) || 0 },
                { id: 'rating-3', value: parseFloat(document.querySelector('#average-rating3')?.textContent.trim()) || 0 },
                { id: 'rating-4', value: parseFloat(document.querySelector('#average-rating4')?.textContent.trim()) || 0 },
                { id: 'rating-5', value: parseFloat(document.querySelector('#average-rating5')?.textContent.trim()) || 0 }
            ];

            // 각 컨테이너의 별점 색칠
            ratings.forEach(({ id, value }) => {

                console.log(`ID: ${id}, Value: ${value}`);

                const container = document.getElementById(id);
                if (!container) {
                    console.error(`Container with ID "${id}" not found.`);
                    return;
                }

                const stars = container.querySelectorAll('.red-star');
                stars.forEach((star, index) => {
                    const starValue = index + 1;
                    if (value >= starValue) {
                        star.style.color = 'gold'; // 빨간 별
                    } else if (value > starValue - 1) {
                        // 반쪽 별
                        star.style.color = 'gold';
                        star.style.background = 'linear-gradient(to right, gold 50%, lightgray 50%)';
                        star.style.webkitBackgroundClip = 'text';
                        star.style.webkitTextFillColor = 'transparent';
                    } else {
                        star.style.color = 'lightgray'; // 회색 별
                    }
                });
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 별점 생성 및 적용 함수
            function createAndApplyStars(containerSelector, averageRating) {
                const container = document.querySelector(containerSelector);
                if (!container) {
                    console.error(`Container ${containerSelector} not found`);
                    return;
                }

                // 별점 초기화 및 생성
                container.innerHTML = '';
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.classList.add('red-star');
                    star.textContent = '★';

                    // 별 색상 설정
                    if (averageRating >= i) {
                        star.style.color = 'gold'; // 빨간 별
                    } else if (averageRating > i - 1) {
                        // 반쪽 별 처리
                        star.style.color = 'gold';
                        star.style.background = 'linear-gradient(to right, gold 50%, lightgray 50%)';
                        star.style.webkitBackgroundClip = 'text';
                        star.style.webkitTextFillColor = 'transparent';
                    } else {
                        star.style.color = 'lightgray'; // 기본 별
                    }

                    container.appendChild(star);
                }
            }

            // 평균 별점 가져오기 및 적용
            const averageRatingElement = document.getElementById('average-rating'); // ID 선택
            if (averageRatingElement) {
                const averageRating = parseFloat(averageRatingElement.textContent.trim()) || 0;
                console.log("평균 별점:", averageRating); // 디버깅용 로그
                createAndApplyStars('.average-stars-2', averageRating);
            } else {
                console.error("평균 별점을 가져올 수 없습니다.");
            }
        });
    </script>

</body>
</html>